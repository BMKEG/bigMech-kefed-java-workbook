<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    	<title>Deploying the BioScholar System</title>

    	<script src="javascripts/toc.js"></script>
    	<script src="javascripts/jquery-2.1.0.min.js"></script>

	    <link rel="stylesheet" href="stylesheets/styles.css">
    	<link rel="stylesheet" href="stylesheets/pygment_trac.css">
    	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    	<!--[if lt IE 9]>
    		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    	<![endif]-->
	</head>
	<body>
		<div class="wrapper">
      		<header>
	    		<h1>Deploying the BioScholar System</h1>
    			<p>What do you need to do to deploy the BioScholar system to a server.</p>

			    <!-- <p class="view"><a href="https://github.com/BMKEG/systems-biology-kefed">View the Project on GitHub <small>BMKEG/systems-biology-kefed</small></a></p>-->
				<ul>
        			<li><a href="05evaluatingEvidenceExtraction.html">Navigate to<strong>previous</strong></a></li>
        			<li><a href="index.html">Navigate to <strong>top</strong></a></li>
        			<li><a href="07heuristicsForResultText.html">Navigate to <strong>next</strong></a></li>
				</ul>
				
				
  
  
    
    <h3 id="y2015">July 2015</h3>
    <ol>
    
  
    <li><a href="17_TwoHopRasBioPaxModel.html">Two-Hop Ras BioPax Model</a></li>
  

  
  
    </ol>
    <h3 id="y2015">May 2015</h3>
    <ol>
    
  
    <li><a href="16_mintact.html">MINT + INTACT DATA</a></li>
  

  
  
    </ol>
    <h3 id="y2015">April 2015</h3>
    <ol>
    
  
    <li><a href="15_phosphorylation_papers_in_PL.html">Open Access Pathway Logic Papers and Figures</a></li>
  

  
  
    <li><a href="14_extendedCoPICorpus.html">Extended Coprecipitation Frames v2</a></li>
  

  
  
    </ol>
    <h3 id="y2015">January 2015</h3>
    <ol>
    
  
    <li><a href="13coPIFramesV2.html">Coprecipitation Frames v2</a></li>
  

  
  
    <li><a href="12MotifTypes.html">List of Experimental Motif Types + Definitions</a></li>
  

  
  
    <li><a href="11kefedDatabaseConstruction.html">KEfED Database Construction</a></li>
  

  
  
    </ol>
    <h3 id="y2014">December 2014</h3>
    <ol>
    
  
    <li><a href="10modelsOfCoprecipitationPapers.html">KEfED Modeling of Coprecipitation Ras Papers</a></li>
  

  
  
    <li><a href="09initialResultsKEfEDEpistemicsStudy.html">Initial Extraction Study of Results-Based Epistemics</a></li>
  

  
  
    </ol>
    <h3 id="y2014">October 2014</h3>
    <ol>
    
  
    <li><a href="08pathwayLogicExperimentTypes.html">Pathway Logic Experiment Types</a></li>
  

  
  
    <li><a href="07heuristicsForResultText.html">Building a Database of Observations from Result Text</a></li>
  

  
  
    <li><a href="06deployingBioScholar.html">Deploying the BioScholar System</a></li>
  

  
  
    <li><a href="05evaluatingEvidenceExtraction.html">Reading Against a Model of Experimental Evidence</a></li>
  

  
  
    </ol>
    <h3 id="y2014">August 2014</h3>
    <ol>
    
  
    <li><a href="04kefed1.html">Developing NL Annotations for KEfED Elements</a></li>
  

  
  
    <li><a href="03fragments.html">Epistemics and Fragments</a></li>
  

  
  
    <li><a href="02bigMechanismsEvalCorpus.html">Generating the Big Mechanisms Evaluation Corpus</a></li>
  

  
  
    <li><a href="01aGenerativeModelForTextFromExperimentalObservations.html">A Generative Story for Scientific Text from Experimental Data</a></li>
  </ol>

				
			</header>
      
      		<section>
      		<div class="toc"></div>

          	<p>Here we just document the various pieces needed to run the BioScholar system within Tomcat on a Linux server.</p>

<ol>
  <li>
    <h2 id="bmkegproperties"><code class="highlighter-rouge">bmkeg.properties</code></h2>
  </li>
</ol>

<p>You will need to place a <code class="highlighter-rouge">bmkeg.properties</code> file that you will need to refer to when you run Tomcat.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>bmkeg.workingDirectory=/nfs/amber/burns/Projects/2_active/bigMechanisms/workingDirectory/wd
bmkeg.dbDriver=com.mysql.jdbc.Driver
bmkeg.dbUrl=dbName
bmkeg.dbUser=dbLogin
bmkeg.dbPassword=dbPassword
</code></pre>
</div>

<p>This refers to several pieces that we will elaborate on here:</p>

<h3 id="workingdirectory">1.1 <code class="highlighter-rouge">workingDirectory</code></h3>

<p>This is where all the <code class="highlighter-rouge">*.pdf</code>, <code class="highlighter-rouge">*.xml</code> and <code class="highlighter-rouge">*.txt</code> files go. Typically, a working directory will have the following substructure.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>+ wd
  +=&gt; pdfs
    +=&gt; journal
      +=&gt; year
        +=&gt; vol
          +=&gt; 12345.pdf
          +=&gt; 12345.swf
          +=&gt; 12345_pmc.xml
          +=&gt; 12345.txt
  +=&gt; lod
  +=&gt; owl
  +=&gt; elsevierKeyFile.txt
  +=&gt; webapp.properties
</code></pre>
</div>

<ul>
  <li><code class="highlighter-rouge">elsevierKeyFile.txt</code> is for logging into ScienceDirect for full text of Elsevier articles.</li>
  <li><code class="highlighter-rouge">lod</code> and <code class="highlighter-rouge">owl</code> are development directories designed to use with semantic web extensions to BioScholar.</li>
  <li><code class="highlighter-rouge">webapp.properties</code> are locations of executables for use of <code class="highlighter-rouge">swftools</code> and <code class="highlighter-rouge">brat</code> from within the interface.</li>
</ul>

<p>The format is as shown below:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>swftools.bin.path=/usr/local/bin
bratData.bin.path=/path/to/brat/installation/brat/brat-v1.3_Crunchy_Frog/
</code></pre>
</div>

<!-- You will need a predefined wd tar archive -->
<!-- You will also need swftools installed on the system -->

<ol>
  <li>
    <h2 id="mysql-installation">MySQL installation</h2>
  </li>
</ol>

<p>Update the <code class="highlighter-rouge">/etc/my.cnf</code> configuration file with the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>max_allowed_packet = 10485760
innodb_log_file_size = 125242880
</code></pre>
</div>

<p>The <code class="highlighter-rouge">bmkeg.properties</code> file must have a current login to the local MySQL system with sufficient permissions to add and delete data.</p>

<ol>
  <li>
    <h2 id="vpdmf-data"><code class="highlighter-rouge">VPDMf</code> data</h2>
  </li>
</ol>

<p>The BioScholar system uses the ‘View-Primitive-Data-Modeling framework’ as its basis This is a local system developed within the BMKEG (see <a href="https://github.com/BMKEG/vpdmfProject">https://github.com/BMKEG/vpdmfProject</a> which permits a data archive to be easily installed into the underlying MySQL database (or saved from an existing database).</p>

<p>VPDMf Binary <code class="highlighter-rouge">jar</code> file: <a href="data/vpdmfCore-1.1.5-SNAPSHOT-jar-with-dependencies.jar">data/vpdmfCore-1.1.5-SNAPSHOT-jar-with-dependencies.jar</a> (34MB)</p>

<p>Installing the database is then pretty easy using this command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>java -cp vpdmfCore-1.1.5-SNAPSHOT-jar-with-dependencies.jar
 	edu.isi.bmkeg.vpdmf.bin.BuildDatabaseFromVpdmfArchive
 	/path/to/vpdmf/archive.zip
	dbName
	dbLogin
	dbPassword
</code></pre>
</div>

<!-- You will need a predefined vpdmf data dump -->

<p>Dumping a VPDMf database to a zip file is also pretty easy with this command (you need to refer to a previous vpdmf archive to build the system):</p>

<div class="highlighter-rouge"><pre class="highlight"><code>java -cp vpdmfCore-1.1.5-SNAPSHOT-jar-with-dependencies.jar
 	edu.isi.bmkeg.vpdmf.bin.DumpDatabaseToVpdmfArchive
 	/path/to/old/vpdmf/archive.zip
	dbName
	dbLogin
	dbPassword
 	/path/to/new/vpdmf/archive.zip		
</code></pre>
</div>

<h3 id="running-tomcat">4. Running tomcat</h3>

<p>In order to inform Tomcat where the working directory is, you need to set some environment variables.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>export TOMCAT_HOME=/path/to/tomcat
export CATALINA_OPTS="-Dbmkeg.propertiesfile=/path/to/bmkeg.properties -Xmx1096M -Xms512M"
</code></pre>
</div>

<p>You will then need to build the BioScholar <code class="highlighter-rouge">*.war</code> file (and place it into the <code class="highlighter-rouge">$TOMCAT_HOME/webapps</code> directory). This is 111MB in size and so is a little too big for this site.</p>

<p>Then all you do is <code class="highlighter-rouge">TOMCAT_HOME/bin/startup.sh</code> to start up the system.</p>


	  	</section>

    	</div>
    	<script src="javascripts/scale.fix.js"></script>
        <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
        </script>
        <script type="text/javascript">
        	try {
              	var pageTracker = _gat._getTracker("UA-50171612-1");
            	pageTracker._trackPageview();
            } catch(err) {}
		</script>
  </body>
</html>